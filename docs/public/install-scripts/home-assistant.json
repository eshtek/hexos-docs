{
  "version": 1,
  "requirements": {
    "locations": ["ApplicationsPerformance", "Media"],
    "specifications": ["2CORE", "200MB"],
    "permissions": ["READ_WRITE_LOCATIONS"],
    "ports": []
  },
  "ensure_directories_exists": [
    {
      "path": "$LOCATION(ApplicationsPerformance)",
      "network_share": true
    },
    {
      "path": "$LOCATION(Media)",
      "network_share": true
    },
    "$LOCATION(ApplicationsPerformance)/home-assistant",
    {
      "path": "$LOCATION(ApplicationsPerformance)/home-assistant/postgres_data",
      "posix": true
    },
    "$LOCATION(Media)/home-assistant"
  ],
  "ensure_permissions_exists": [
    {
      "path": "$LOCATION(ApplicationsPerformance)/home-assistant/postgres_data",
      "username": "netdata",
      "access": "read",
      "posix": {
        "groupname": "docker"
      }
    }
  ],
  "app_values": {
    "home_assistant": {
      "db_password": "$RANDOM_STRING(7)"
    },
    "storage": {
      "config": "$HOST_PATH($LOCATION(ApplicationsPerformance)/home-assistant)",
      "media": "$HOST_PATH($LOCATION(Media)/home-assistant)",
      "postgres_data": "$HOST_PATH($LOCATION(ApplicationsPerformance)/home-assistant/postgres_data)"
    },
    "network": {
      "web_port": {
        "bind_mode": "published",
        "port_number": 8123
      }
    },
    "resources": {
      "limits": {
        "cpus": 2,
        "memory": "$MEMORY(10%, 2048)"
      }
    }
  }
}
