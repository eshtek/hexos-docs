{
  "version": 2,
  "installation_questions": [
    {
      "question": "Enable GPU acceleration for machine learning?",
      "description": "GPU acceleration significantly improves photo recognition speed but requires compatible hardware.",
      "type": "select",
      "key": "gpu_passthrough",
      "required": true,
      "options": [
        {
          "text": "Yes - Use GPU for faster photo recognition",
          "value": true
        },
        {
          "text": "No - Use CPU only",
          "value": false
        }
      ],
      "default": false
    }
  ],
  "ensure_directories_exists": [
    {
      "path": "$LOCATION(ApplicationsPerformance)",
      "network_share": true
    },
    {
      "path": "$LOCATION(Photos)",
      "network_share": true
    },
    "$LOCATION(Photos)/immich",
    {
      "path": "$LOCATION(ApplicationsPerformance)/immich/postgres_data",
      "posix": true
    }
  ],
  "ensure_permissions_exists": [
    {
      "path": "$LOCATION(ApplicationsPerformance)/immich/postgres_data",
      "username": "netdata",
      "access": "read",
      "posix": {
        "groupname": "docker"
      }
    }
  ],
  "app_values": {
    "release_name": "immich",
    "immich": {
      "enable_ml": true,
      "ml_image_selector": "ml_image",
      "db_password": "$RANDOM_STRING(7)",
      "redis_password": "$RANDOM_STRING(7)",
      "log_level": "log",
      "hugging_face_endpoint": "",
      "db_storage_type": "SSD",
      "additional_envs": []
    },
    "network": {
      "web_port": {
        "bind_mode": "published",
        "port_number": 2283
      }
    },
    "storage": {
      "data": "$HOST_PATH($LOCATION(Photos)/immich)",
      "ml_cache": {
        "type": "temporary"
      },
      "postgres_data": "$HOST_PATH($LOCATION(ApplicationsPerformance)/immich/postgres_data)"
    },
    "resources": {
      "limits": {
        "cpus": 2,
        "memory": "$MEMORY(10%, 4096)"
      },
      "gpus": {
        "use_all_gpus": "$QUESTION(gpu_passthrough)"
      }
    }
  }
}